<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ”‘ Archivio Password Sicuro</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
    <div class="background-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <!-- Auth Container (Login/Signup) -->
    <div id="authContainer" class="auth-container">
        <div class="glass-card auth-card">
            <header>
                <h1><i class="fa-solid fa-shield-halved"></i> Archivio Password</h1>
                <p>Accedi per gestire le tue password in sicurezza</p>
            </header>

            <div id="loginForm" class="auth-form">
                <div class="input-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="tua@email.com" autocomplete="email">
                </div>
                <div class="input-group">
                    <label for="loginPassword">Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="loginPassword" placeholder="La tua password"
                            autocomplete="current-password">
                        <button id="toggleLoginPassword" class="icon-btn" tabindex="-1">
                            <i class="fa-regular fa-eye"></i>
                        </button>
                    </div>
                </div>
                <button id="loginBtn" class="primary-btn">Accedi <i class="fa-solid fa-right-to-bracket"></i></button>
                <p class="auth-switch">Non hai un account? <a href="#" id="showSignup">Registrati</a></p>
            </div>

            <div id="signupForm" class="auth-form" style="display: none;">
                <div class="input-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" placeholder="tua@email.com" autocomplete="email">
                </div>
                <div class="input-group">
                    <label for="signupPassword">Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="signupPassword" placeholder="Minimo 6 caratteri"
                            autocomplete="new-password">
                        <button id="toggleSignupPassword" class="icon-btn" tabindex="-1">
                            <i class="fa-regular fa-eye"></i>
                        </button>
                    </div>
                </div>
                <button id="signupBtn" class="primary-btn">Registrati <i class="fa-solid fa-user-plus"></i></button>
                <p class="auth-switch">Hai giÃ  un account? <a href="#" id="showLogin">Accedi</a></p>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="appContainer" class="container" style="display: none;">
        <header>
            <div class="header-content">
                <div>
                    <h1><i class="fa-solid fa-shield-halved"></i> Archivio Password</h1>
                </div>
                <button id="logoutBtn" class="logout-btn">
                    <i class="fa-solid fa-right-from-bracket"></i> Esci
                </button>
            </div>
        </header>

        <div class="glass-card input-section">
            <div class="input-group">
                <label for="serviceName">Nome Servizio</label>
                <input type="text" id="serviceName" placeholder="es. Google, Netflix...">
            </div>
            <div class="input-group">
                <label for="password">Password</label>
                <div class="password-wrapper">
                    <input type="password" id="password" placeholder="Inserisci la password">
                    <button id="toggleInputPassword" class="icon-btn" tabindex="-1"><i
                            class="fa-regular fa-eye"></i></button>
                </div>
            </div>
            <button id="saveBtn" class="primary-btn">Salva Password <i class="fa-solid fa-floppy-disk"></i></button>
        </div>

        <div class="glass-card list-section">
            <div class="list-header">
                <h2>Le tue Password</h2>
                <button id="deleteAllBtn" class="delete-all-btn" title="Elimina tutto l'archivio">
                    <i class="fa-solid fa-trash-can"></i> Elimina Tutto
                </button>
            </div>
            <div id="passwordList" class="password-list">
                <!-- Items will be injected here -->
                <div class="empty-state">
                    <p>Nessuna password salvata.</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-user">
                <i class="fas fa-user-circle"></i>
                <span id="footerEmail" class="footer-email"></span>
            </div>

            <div class="footer-promo">
                <p class="promo-text">
                    <i class="fas fa-lightbulb"></i>
                    Hai bisogno di un'app personalizzata?
                </p>
                <a href="mailto:castromassimo@gmail.com" class="promo-contact" title="Contattami">
                    <i class="fas fa-envelope"></i>
                    <span>Contattami</span>
                </a>
            </div>

            <div class="footer-credits">
                <p>Made with <i class="fas fa-heart"></i> by DevTools</p>
            </div>
        </footer>
    </div>

    <script src="supabase-config.js"></script>
    <script src="script.js"></script>
</body>

</html>